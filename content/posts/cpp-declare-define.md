---
title: "C++ - 宣告 vs. 定義"
date: 2020-06-29T17:23:06+08:00
draft: true
tags: ["c++"]
---


# Declare 宣告

- 宣告是指程式中使用到某個類別或是變數之前，先讓編譯器知道該類別的名稱或是變數的類別與名稱。
- 必須要在實際使用之前宣告。因此在標頭檔以及原始檔之中需要使用 `#include` 這個預處理器命令將用到的類別介紹給編譯器。
    - `#include` 這個預處理器命令實際上是將引入的檔案內容取代掉 `#include` 所在的位置，因此大量的 `#include` 會大幅增加編譯的時間。
    - 如果只用到指標或是參考時，在標頭檔可以使用前置宣告 (Forward Declare) 的技巧來優化。（細節在 **前置宣告** 小節中說明）
        - 不呼叫該指標的方法或是使用它的成員時，編譯器不需要知道該類別的形狀，只需要當成該類型的指標變數來處理。因為指標的大小是固定的，所以不需要引入該類別也可以通過編譯。
- 相同的宣告可以在專案中重複出現。


# Define 定義

- 定義是編譯器提供類型實作細節的地方，以及配置變數記憶體的語句。
    - 因為定義變數時需要配置記憶體在 stack 上，因此編譯器在此時必須要知道此類別的記憶體佈局（成員的順序與類型、記憶體對齊方式等...）。
- 與宣告不同的是，定義在程式中只能出現一次。重複定義會造成錯誤。
    - 同一個轉換單元（Translation Unit）之中只能定義一次，否則會有編譯錯誤。
    - 同專案中不同轉換單元之中也只能定義一次，否則會有連結錯誤。


# Forward Declare 前置宣告



# `extern` 關鍵字





Ref: https://docs.microsoft.com/zh-tw/cpp/cpp/declarations-and-definitions-cpp?view=vs-2019